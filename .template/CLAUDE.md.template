# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

---

## 🔴 最優先ルール（必ず従ってください）

このプロジェクトで作業する際は、以下のルールを**最優先**で守ってください。

### ルール0: 作業開始前に必ずブランチを作成

**絶対に {{DEFAULT_BRANCH}} ブランチで作業しないでください。作業を開始する前に、必ず作業ブランチを作成してください。**

| 作業手順 | 正しい手順 | 間違った手順 |
|----------|-----------|-------------|
| 1. 作業開始時 | `git checkout -b feature/xxx` | ❌ {{DEFAULT_BRANCH}} のまま作業開始 |
| 2. コミット | 作業ブランチにコミット | ❌ {{DEFAULT_BRANCH}} にコミット |
| 3. プッシュ | 作業ブランチにプッシュ | ❌ {{DEFAULT_BRANCH}} にプッシュ |
| 4. PR作成 | 作業ブランチ → {{DEFAULT_BRANCH}} | ❌ 作業ブランチなし |

**作業ブランチ作成コマンド**:
```bash
# {{DEFAULT_BRANCH}}ブランチを最新化
git checkout {{DEFAULT_BRANCH}}
git pull {{REMOTE_NAME}} {{DEFAULT_BRANCH}}

# 作業ブランチを作成
git checkout -b feature/<task-name>
```

⚠️ **重要**: このプロジェクトでは、GitHub無料プランのためブランチ保護が設定できません。
したがって、**{{DEFAULT_BRANCH}}ブランチでの作業を自分で守る必要があります**。

### ルール1: 開発完了の定義

**「開発完了」はPRを作成した時点です。絶対にプッシュのみで完了報告をしないでください。**

| ステップ | 状態 | 完了報告 |
|----------|------|----------|
| コミット | 作業中 | ❌ しない |
| プッシュ | 作業中 | ❌ しない |
| **PR作成** | **完了** | **✅ する** |

作業完了を報告する際は、必ずPRを作成してから報告してください。

### ルール2: レビュー対応時のフロー

レビューコメントに対して「対応」する場合、以下の手順を**必ず**守ってください：

1. **レビュードキュメントを読む**
   - `{{REVIEW_DIR}}pr-XXXX-review.md` を**先頭から最後まで**読んでください
   - Critical問題、改善提案、承認条件をすべて確認してください

2. **Critical問題を修正する**
   - Critical問題がある場合は、最優先で修正してください
   - 修正後は必ず品質チェックコマンドを実行してください

3. **改善提案を確認する**
   - 優先度「高」のものは対応を推奨
   - 優先度「中」「低」のものは対応しなくても問題ありません

4. **レビュアーの指示に従う**
   - 「直したらマージ可（再レビュー不要）」→ 修正完了後、自分でマージしてOK
   - 「直したら再レビュー依頼を」→ 修正完了後、レビュアーに報告

⚠️ **重要**: 「対応」という指示があった場合、必ずレビュードキュメントを読んでから作業を開始してください。

---

## {{PROJECT_NAME}}

<!--
プロジェクト概要を記述してください

- プロジェクトの目的
- 主な特徴
- 技術スタック
- 現在の開発状況
-->

---

## 開発の進め方（ステップバイステップ）

1. **作業ブランチを作る**
   ```bash
   git checkout -b feature/{{TASK_NAME}}
   ```

2. **コードを書く**

3. **テストを実行する**
   ```bash
   {{TEST_COMMAND}}
   ```

4. **品質チェック**
   ```bash
   {{QUALITY_CHECK_COMMAND}}
   ```

5. **変更をコミットする**
   ```bash
   git add .
   git commit -m "feat: 機能の説明"
   ```

6. **GitHubにプッシュしてPRを作る**
   ```bash
   git push -u origin feature/{{TASK_NAME}}
   ```

---

## 開発完了チェックリスト（PR作成時）

**開発完了の定義**: PRを作成してレビュー依頼を出した時点を「開発完了」とします。
プッシュのみで完了報告をしないよう注意してください。

- [ ] テストがパスする
- [ ] 品質チェックが通る
- [ ] PRを作成してレビューを受ける

---

## 開発に関する詳細ドキュメント

開発ワークフロー、品質管理、レビュー運用などの詳細は以下のドキュメントを参照してください。

### ワークフロー

- [docs/workflows/development-process.md](docs/workflows/development-process.md) - 開発ワークフロー
- [docs/workflows/post-merge-workflow.md](docs/workflows/post-merge-workflow.md) - マージ後のワークフロー
- [docs/workflows/review-process.md](docs/workflows/review-process.md) - レビュー運用フロー

### 品質管理

- [docs/quality/quality-management.md](docs/quality/quality-management.md) - コード品質管理

### ドキュメント管理

- [docs/documentation/documentation-update-process.md](docs/documentation/documentation-update-process.md) - ドキュメント更新フロー
