# Issue #48: プロンプト確認時間の短縮

**作成日**: 2026-02-04
**優先度**: P1
**ステータス**: Open
**関連Issue**: #45, #46

---

## 概要

現在、プロンプト準備完了の確認に最大60秒待機しています。これを30秒に短縮することで、起動時間を短縮します。

---

## 現象

### 現在の実装

**ファイル**: `orchestrator/core/cc_process_launcher.py`

```python
# プロンプト準備完了を確認（起動確認メッセージ送信前に確認）
if not await self._wait_for_prompt_ready(timeout=60.0):
    raise CCProcessLaunchError(
        f"プロセス '{self._config.name}' のプロンプト起動を確認できませんでした"
    )
```

### 起動時間の内訳

1. Claude Codeの起動待機: 2秒
2. **プロンプト準備完了の確認: 最大60秒**
3. 起動確認メッセージ送信: 即時
4. マーカー待機: 最大30秒
5. 追加待機: 5秒

**合計**: 最大97秒

---

## 修正内容

### プロンプト確認のタイムアウト短縮

```diff
- # プロンプト準備完了を確認（起動確認メッセージ送信前に確認）
- if not await self._wait_for_prompt_ready(timeout=60.0):
+ # プロンプト準備完了を確認（起動確認メッセージ送信前に確認）
+ if not await self._wait_for_prompt_ready(timeout=30.0):
    raise CCProcessLaunchError(
        f"プロセス '{self._config.name}' のプロンプト起動を確認できませんでした"
    )
```

---

## 期待される効果

- 起動時間が最大97秒から最大67秒に短縮（30%短縮）
- ユーザー体験の向上

---

## 懸念事項

- プロンプト検出が不安定になる可能性があります
- タイムアウトが発生した場合は、タイムアウト時間を再調整します

---

## テスト計画

1. 修正実施後、10回の起動・停止サイクルを実施
2. プロンプト検出の成功率が90%以上であることを確認
3. 平均起動時間が短縮していることを確認

---

## 関連ファイル

- `orchestrator/core/cc_process_launcher.py` - 起動プロセス管理
